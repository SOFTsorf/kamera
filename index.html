<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, orientation=landscape">
    <title>UHD Camera Pro</title>
    <style>
        :root {
            --ui-white: rgba(255, 255, 255, 0.9);
            --ui-bg: rgba(0, 0, 0, 0.3);
        }

        /* Sperre f√ºr Laptops/Desktops */
        @media (pointer: fine) and (min-width: 1024px) {
            body { display: flex !important; justify-content: center; align-items: center; background: #000; color: white; height: 100vh; margin: 0; }
            body * { display: none; }
            body::after { content: "Diese App ist nur f√ºr Mobilger√§te optimiert."; font-size: 20px; display: block; }
        }

        body {
            margin: 0;
            padding: 0;
            background: #000;
            color: white;
            font-family: Arial, sans-serif;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            flex-direction: row; /* Optimiert f√ºr Querformat */
        }

        /* Sucher / Viewport */
        #camera-view {
            position: relative;
            flex-grow: 1;
            background: #111;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Top Bar (im Querformat links oder oben) */
        .top-icons {
            position: absolute;
            top: 10px;
            right: 20px;
            display: flex;
            gap: 20px;
            font-size: 14px;
            text-shadow: 1px 1px 2px black;
        }

        /* Zoom Controls (Mitte unten im Screenshot) */
        .zoom-controls {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            background: rgba(0,0,0,0.5);
            padding: 5px 15px;
            border-radius: 30px;
        }
        .zoom-btn {
            background: none;
            border: none;
            color: white;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
        }
        .zoom-btn.active {
            background: #444;
            border-radius: 50%;
        }

        /* Rechte Steuerungsleiste (Ausl√∂ser etc.) */
        .side-panel {
            width: 120px;
            background: black;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            align-items: center;
            padding: 20px 0;
        }

        /* Ausl√∂ser */
        .shutter-btn {
            width: 70px;
            height: 70px;
            background: white;
            border-radius: 50%;
            border: 5px solid #333;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .shutter-btn:active { transform: scale(0.9); }

        /* QR Preview Kreis (unten links im Screen) */
        .qr-preview {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            border: 2px solid white;
            background: url('https://api.qrserver.com/v1/create-qr-code/?size=50x50&data=UHD');
            background-size: cover;
        }

        /* Modus Leiste (unten) */
        .mode-bar {
            position: absolute;
            bottom: 20px;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 20px;
            font-size: 13px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .mode-item.active { color: #f8d02e; }

        #timer { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); color: red; font-weight: bold; display: none; }
    </style>
</head>
<body>

    <div id="camera-view">
        <div id="timer">REC 00:00</div>
        
        <div class="top-icons">
            <span>‚ö° Off</span>
            <span>12M</span>
            <span>(9:16)</span>
            <span>‚öôÔ∏è</span>
        </div>

        <video id="preview" autoplay playsinline muted></video>

        <div class="zoom-controls">
            <button class="zoom-btn">.5</button>
            <button class="zoom-btn active">1x</button>
            <button class="zoom-btn">2</button>
        </div>

        <div class="mode-bar">
            <div class="mode-item">Fun</div>
            <div class="mode-item">Portr√§t</div>
            <div class="mode-item active">Foto</div>
            <div class="mode-item">Video</div>
            <div class="mode-item">Mehr</div>
        </div>
    </div>

    <div class="side-panel">
        <div class="qr-preview"></div>
        
        <div class="shutter-btn" id="actionBtn"></div>
        
        <button id="switchBtn" style="background:none; border:none; color:white; font-size:24px;">üîÑ</button>
    </div>

    <script>
        const video = document.getElementById('preview');
        const actionBtn = document.getElementById('actionBtn');
        const switchBtn = document.getElementById('switchBtn');
        const timerDisplay = document.getElementById('timer');

        let mediaRecorder;
        let recordedChunks = [];
        let isRecording = false;
        let currentFacingMode = 'environment';

        async function startApp() {
            // UHD 30 FPS Anforderung
            const constraints = {
                video: {
                    width: { ideal: 3840 },
                    height: { ideal: 2160 },
                    frameRate: { ideal: 30 },
                    facingMode: currentFacingMode
                },
                audio: {
                    echoCancellation: false,
                    sampleRate: 48000
                }
            };

            try {
                const stream = await navigator.mediaDevices.getUserMedia(constraints);
                video.srcObject = stream;

                mediaRecorder = new MediaRecorder(stream, {
                    mimeType: 'video/webm;codecs=vp9,opus'
                });

                mediaRecorder.ondataavailable = e => recordedChunks.push(e.data);
                mediaRecorder.onstop = saveVideo;

            } catch (err) {
                alert("Kamera-Zugriff verweigert oder UHD nicht unterst√ºtzt.");
            }
        }

        function saveVideo() {
            const blob = new Blob(recordedChunks, { type: 'video/webm' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'UHD_Video.webm';
            a.click();
        }

        actionBtn.onclick = () => {
            if (!isRecording) {
                recordedChunks = [];
                mediaRecorder.start();
                isRecording = true;
                actionBtn.style.background = "red";
                timerDisplay.style.display = "block";
                startTimer();
            } else {
                mediaRecorder.stop();
                isRecording = false;
                actionBtn.style.background = "white";
                timerDisplay.style.display = "none";
                stopTimer();
            }
        };

        switchBtn.onclick = () => {
            currentFacingMode = (currentFacingMode === 'user') ? 'environment' : 'user';
            startApp();
        };

        // Timer Logik
        let timerInt;
        function startTimer() {
            let s = 0;
            timerInt = setInterval(() => {
                s++;
                let mins = Math.floor(s/60).toString().padStart(2,'0');
                let secs = (s%60).toString().padStart(2,'0');
                timerDisplay.innerText = `REC ${mins}:${secs}`;
            }, 1000);
        }
        function stopTimer() { clearInterval(timerInt); }

        // Initialer Start
        startApp();
    </script>
</body>
</html>
